<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>What area Campaign and Param files?</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<p>In this tutorial, I will be using <code>pSIMSSiteMaker</code> and <code>pSIMCampaignManager</code> packages to first create a ncdf campaign file and then use the newly created campaign file to create a whole pSIMS simulation for a specific site.</p>

<p>Before using these packages, I need to mention that <code>pSIMCampaignManager</code> depends on two packages of <code>JBTools</code> and <code>ncdf.tools</code> which both are unfortunately off the CRAN, however you can the following link to find the latests version : <a href="https://github.com/AgronomicForecastingLab/pSIMS_Campaign_Manager/tree/master/inst">Link to packages</a>  and manually install them.</p>

<style>
 table{
    border: 1px solid black; padding:10px;

    width: 75% !important;;
    }
</style>

<pre><code class="r">library(pSIMSSiteMaker)
library(pSIMCampaignManager)
</code></pre>

<h3>What area Campaign and Param files?</h3>

<h1>The parameter file</h1>

<p>The parameter file is a YAML-formatted file containing all the parameters of a psims
run. It defines things like the number of simulation years, the path to climate input files,
and which model to use. Below is a list of parameters and a description of what it does.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>aggregator</td>
<td>Aggregator options, used to average a variable across a region</td>
</tr>
<tr>
<td>checker</td>
<td>Checker translator and options, check if a tile should be simulated or not</td>
</tr>
<tr>
<td>delta</td>
<td>Simulation delta, gridcell spacing in arcminutes</td>
</tr>
<tr>
<td>executable</td>
<td>Name of executable and arguments to run for each grid</td>
</tr>
<tr>
<td>lat_zero</td>
<td>Top edge of the North most grid cell in the campaign</td>
</tr>
<tr>
<td>lon_zero</td>
<td>Left edge of the West most grid cell in the campaign</td>
</tr>
<tr>
<td>long_names</td>
<td>Long names for variables, in same order that variables are listed</td>
</tr>
<tr>
<td>model</td>
<td>Defines the type of model to run. Valid options are dssat45, dssat46, apsim75</td>
</tr>
<tr>
<td>num_lats</td>
<td>Number of latitudes to be included in final nc4 file (starting with lat_zero)</td>
</tr>
<tr>
<td>num_lons</td>
<td>Number of longitudes to be included in final nc4 file (starting with lon_zero)</td>
</tr>
<tr>
<td>num_years</td>
<td>Number of years to simulate</td>
</tr>
<tr>
<td>out_file</td>
<td>Defines the prefix of the final nc4 filename</td>
</tr>
<tr>
<td>outtypes</td>
<td>File extensions of files to include in output tar file</td>
</tr>
<tr>
<td>refdata</td>
<td>Directory containing reference data. Will be copied to each simulation</td>
</tr>
<tr>
<td>ref_year</td>
<td>Reference year (the first year of the simulation)</td>
</tr>
<tr>
<td>scens</td>
<td>Number of scenarios in the campaign</td>
</tr>
<tr>
<td>soils</td>
<td>Directory containing soils</td>
</tr>
<tr>
<td>tappcmp</td>
<td>Campaign translator and options</td>
</tr>
<tr>
<td>tappinp</td>
<td>Input translator and options, goes from experiment.json and soil.json to model specific files</td>
</tr>
<tr>
<td>tapptilewth</td>
<td>Weather tile translator and options</td>
</tr>
<tr>
<td>tapptilesoil</td>
<td>Soil tile translator and options</td>
</tr>
<tr>
<td>tappnooutput</td>
<td>The &ldquo;no output&rdquo; translator and options, typically used to create empty data</td>
</tr>
<tr>
<td>tappwth</td>
<td>Weather translator and options, converts .psims.nc format into model specfic weather files</td>
</tr>
<tr>
<td>tdelta</td>
<td>Tile delta gridcell spacing in arcminutes</td>
</tr>
<tr>
<td>postprocess</td>
<td>Name of translator and options to run after running executable</td>
</tr>
<tr>
<td>var_units</td>
<td>Units to use for each variable, in the same order that variables are listed</td>
</tr>
<tr>
<td>variables</td>
<td>Define the variables to extract to final outputs</td>
</tr>
<tr>
<td>weather</td>
<td>Defines the directory where weather data is stored</td>
</tr>
</tbody></table>

<h1>Campaign Files</h1>

<p>When pysims is run, the user must specify a campaign directory with the &ndash;campaign parameter. Typically this campaign directory contains two relevant files named Campaign.nc4 and exp_template.json. These files are used by the jsons2dssat and jsons2apsim translators to create experiment files for the crop model.</p>

<p>The exp_template.json file contains key-value pairs for data that will be written to the experiment file. These values represent things like fertilizer amounts, irrigation settings, and planting dates. Static settings for the experiment are stored in exp_template.json. Values that vary by lat, lon, scenario, or time get stored in Campaign.nc4.</p>

<p>Here is an example of irrigation definitions in exp_template.json.</p>

<p>But users may not want to these irrigation settings everywhere. If they have a collection of irrigation amounts (iramt) that change by location, users may create a variable in Campaign.nc4 called iramt. The most basic version of this would be a NetCDF variable in the format of float iramt(lat, lon). When pysims runs for a given point, the appropriate value would transfer from Campaign.nc4 into the experiment file. If iramt is not defined in Campaign.nc4, the static value from exp_template.json is used instead.</p>

<p>There may be situations where users want to have multiple irrigation amounts defined in your exp_template.json. In this case having an iramt variable in Campaign.nc4 variable is ambiguous because you&#39;re not sure which irrigation amount it corresponds to. In these cases pysims uses a numbering system in the Campaign.nc4 variable names. The variable iramt_1 corresponds to the first instance of iramt in exp_template.json. iramt_2 corresponds to the second instance, and so on. This process works the same for all variables, not just limited to iramt.</p>

<p><strong>For more information please read the README page on the <a href="https://github.com/RDCEP/psims">Github pSIMS page</a></strong></p>

<h3>Creating an Empty Campign file</h3>

<pre><code class="r">Create_Empty_Campaign(lat=c(44,45), lon=c(-91,-92), num_scen=3, filename = &quot;MyCampaign.nc4&quot;)
</code></pre>

<p>For some basic inspection purposes, we can use the <code>Get_Camp_dim</code> to explore the number of dimensions in your campaign file.</p>

<pre><code class="r">Get_Camp_dim(&quot;MyCampaign.nc4&quot;)
</code></pre>

<pre><code>## $Lat
## [1] 44 45
## 
## $Lon
## [1] -91 -92
## 
## $Scen
## [1] 1 2 3
## 
## $Extent
## class      : Extent 
## xmin       : 0.5 
## xmax       : 3.5 
## ymin       : 43.5 
## ymax       : 45.5 
## 
## $Count
## [1] 4
</code></pre>

<p>Another handy function named <code>Campaign_emptyMatrix</code> also creates a series of matrices (as many as the number of scenarios) that could be used for inserting into our Campaign file. In the code below this  <code>Get_Camp_dim(&quot;MyCampaign.nc4&quot;)$Count</code> helps to find the number of values that needs to be generated for each scenario.</p>

<pre><code class="r">Campaign_emptyMatrix(&quot;MyCampaign.nc4&quot;,
                      runif(Get_Camp_dim(&quot;MyCampaign.nc4&quot;)$Count, 100,2500)
)
</code></pre>

<pre><code>## [[1]]
##           [,1]     [,2]
## [1,]  574.2942 400.5779
## [2,] 2235.1374 502.4091
## 
## [[2]]
##           [,1]     [,2]
## [1,]  574.2942 400.5779
## [2,] 2235.1374 502.4091
## 
## [[3]]
##           [,1]     [,2]
## [1,]  574.2942 400.5779
## [2,] 2235.1374 502.4091
</code></pre>

<hr/>

<h3>Add variables to our Campagin file</h3>

<p>Campaign variables can be classified into three categories: 1) Variables with numeric values such as initial soil moisture or residue weight 2) Categorical variables such as hybrid names for different cultivates, name of the met files and 3) Variables with date values such planting date or harvesting date </p>

<h4>Add variables with numeric values:</h4>

<pre><code class="r">#generate new values for your new variable
num_scen &lt;- Get_Camp_dim(&quot;MyCampaign.nc4&quot;)$Scen

new.values &lt;- purrr::map(seq_along(num_scen), ~Campaign_emptyMatrix(&quot;MyCampaign.nc4&quot;,
                                                    runif(Get_Camp_dim(&quot;MyCampaign.nc4&quot;)$Count, 100,2500)
)[[1]])

print(new.values)
</code></pre>

<pre><code>## [[1]]
##           [,1]     [,2]
## [1,] 2139.2199 2273.466
## [2,]  241.0763 2240.229
## 
## [[2]]
##          [,1]     [,2]
## [1,] 1482.843 2142.808
## [2,] 2419.936 1760.544
## 
## [[3]]
##          [,1]     [,2]
## [1,] 2444.631 1581.442
## [2,] 1579.626 1812.443
</code></pre>

<p>Now add the created values to the campaign file :</p>

<pre><code class="r">AddVar_Campaign(&quot;MyCampaign.nc4&quot;,
                Variable = list(Name=&#39;icrag&#39;,
                                Unit=&#39;Kg&#39;, 
                                longname = &quot;&quot;, 
                                prec = &quot;float&quot;,
                                missingValue=-99,
                                value= new.values
                ),
                attr = list(&#39;long_name&#39;,&quot;Residue weight&quot;)
)
</code></pre>

<p>We can then check if the variable was corectly added by using the following functions:</p>

<pre><code class="r">GetCamp_VarMatrix(&quot;MyCampaign.nc4&quot;, &#39;icrag&#39;)
</code></pre>

<pre><code>## $Matrix
## , , 1
## 
##           [,1]     [,2]
## [1,] 2139.2200 2273.466
## [2,]  241.0763 2240.229
## 
## , , 2
## 
##          [,1]     [,2]
## [1,] 1482.843 2142.808
## [2,] 2419.936 1760.544
## 
## , , 3
## 
##          [,1]     [,2]
## [1,] 2444.631 1581.442
## [2,] 1579.626 1812.443
## 
## 
## $Raster
## class      : RasterStack 
## dimensions : 2, 2, 4, 3  (nrow, ncol, ncell, nlayers)
## resolution : 1, 1  (x, y)
## extent     : -92.5, -90.5, 43.5, 45.5  (xmin, xmax, ymin, ymax)
## crs        : +proj=longlat +datum=WGS84 +no_defs 
## names      : X1, X2, X3 
## day as %Y%m%d.%f: 1, 2, 3 
## 
## 
## $Attributes
## $Attributes$units
## [1] &quot;Kg&quot;
## 
## $Attributes$`_FillValue`
## [1] -99
</code></pre>

<pre><code class="r">plot(GetCamp_VarMatrix(&quot;MyCampaign.nc4&quot;, &#39;icrag&#39;)$Raster)
</code></pre>

<p><img src="data:image/png;base64,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pKRk1qxZ165d27FjR3Z2Ns/zZWVljz/+OM/zR44cueuuu5w3/umnn/qzzKRH+zp69OiUKVNsNltZWdnTTz/tld0J1q5du3bt2m4be/3Q+tiXGIfWx2f289AAYGCIeEZ/4MCB6dOnq9XqlJSU2tpaIrp06dL8+fOJSKfT+fv7X7161bFxc3Nzf1aN92hfO3fuzMzMZIylp6cLG/d/d0SUmpqan5/fc2OvH1of+xLj0Pr4zH4eGgAMDBGDPiIi4vPPPycik8nU1tbW2dk5a9asadOmEdGWLVtiYmKcb9Dxww8/7N27NyUl5Z577hHeJd6+zpw5I6wcoNFobDabVw6NiIxGY0FBQc+NvX5ofexLjEPr4zP7eWgAMDBc30rQK5555pnf/va3Op0uMjLyrrvuElaAsVqteXl5u3btqqqqct44LCzslVdeeeyxx+rr66dPn37q1Cnx9sU7zSi12Ww8zzPG+r+73ohxaL0R49D6+Mx+HhoADAzvB/277767devW8PDwP//5z9u2bSMiq9U6btw4tVpttVqnTp0aHx+/e/fuboEVGxsbGxtLRAaDgeO4jo4Od+41eGv7GjFiRGtrKxF1dXVxHOd+FPaxuz7e5fVD6+NdYhxaH595a4cGAANNvOH/6upq4be7jRs3Ll68mOf5995775lnnnHexmazdXZ28jz/hz/8YdWqVTzPHz58eOzYsaLu68iRIykpKTzP79ixY968eV45NIHzD6TiHVof+xLj0Hp+prcODQAGhohBz/P8E088cd999/36178+d+4cz/M5OTl33333PT+zWCzff//96NGjeZ5vb2/PzMyMjY01GAxff/21qPvieb6oqOihhx5KTU09deqUVw5N4By+4h1aH/sS6dC6faYXDw0ABgCWQAAAUDhcGQsAoHD/H6iMUOR+5GnUAAAAAElFTkSuQmCC" alt="plot of chunk unnamed-chunk-8"/></p>

<h4>Add variables with categorical values:</h4>

<p>pSIMS uses the <code>long_name</code> attribute to store a list of categorical variables, and then uses the indices specified as the value for that variable to map the indices to the categorical values.  </p>

<p>We can use <code>copy_variable</code> function to create a new variable based on an exiting variable in our campaign file. Then using the <code>Edit_mapping_var</code> we set the <code>long_name</code> attribute to a list of desired categorical values. In the below example we use the <code>file</code> variable to ensemble the met files in apsim simulations where &#39;met00000.met,met00001.met&hellip;&#39; refers to the name of the met files. Lastly, we create random indices (values should be as many as we have categorical values and 10 the example below)</p>

<pre><code class="r"># How many value I need to produce . lat * lon = count * number of scenarios
Countv &lt;- Get_Camp_dim(&quot;MyCampaign.nc4&quot;)$Count * max(Get_Camp_dim(&quot;MyCampaign.nc4&quot;)$Scen)

copy_variable(&quot;MyCampaign.nc4&quot;, varname=&#39;file&#39;, fromname=&#39;icrag&#39;)

Edit_mapping_var (&quot;MyCampaign.nc4&quot;, var=&#39;file&#39; , attr=&#39;long_name&#39;, value=&#39;met00000.met,met00001.met,met00002.met,met00003.met,met00004.met,met00005.met,met00006.met,met00007.met,met00008.met,met00009.met&#39;)

set_scenario_val (&quot;MyCampaign.nc4&quot;, &#39;file&#39;, sample(1:10, Countv, TRUE))
</code></pre>

<p>These variables could be also created as follow using <code>AddVar_Campaign</code> function. 1) We create a series of indices between 1-14 allowing psims to map the indices to the categorical values specified in the &ldquo;long-name&rdquo;.  2) Add those values as a new variable here called <code>cultivar</code> and 3) edit the long name by speicifying the list of your cultivar names.</p>

<pre><code class="r">new.values &lt;- purrr::map(1:50,~Campaign_emptyMatrix(&quot;MyCampaign.nc4&quot;,
                                                    sample(c(1:14), Get_Camp_dim(&quot;MyCampaign.nc4&quot;)$Count,TRUE)
)[[1]])



AddVar_Campaign(&quot;MyCampaign.nc4&quot;,
                Variable = list(Name=&#39;cultivar&#39;,
                                Unit=&#39;Mapping&#39;,
                                missingValue=-99,
                                longname = &quot;&quot;, 
                                prec = &quot;float&quot;,
                                value= new.values
                ),
                attr = list(&#39;long_name&#39;,&quot;Nebraska_3.1,Nebraska_3.2,Nebraska_3.3,Nebraska_3.4,HiSoy2846_2.8,Pioneer93M42_3.4,Pioneer91B01_1.0,Pioneer_92M61_2.6,Becks_321NRR_3.2,Becks_367NRR_3.7,Krucr_2.7,Elgin_2.7,K283_2.0,Wayne_3.0&quot;)
)
</code></pre>

<p>We can also always inspect the campaign file to check if the variables are in the right format using below functions:</p>

<pre><code class="r">Inspect_Camp(&quot;MyCampaign.nc4&quot;)
</code></pre>

<pre><code>## $Lat
## [1] 44 45
## 
## $Lon
## [1] -91 -92
## 
## $Scen
## [1] 1 2 3
## 
## $Variables
## [1] &quot;myvar&quot;    &quot;icrag&quot;    &quot;file&quot;     &quot;cultivar&quot;
## 
## $Extent
## class      : Extent 
## xmin       : 0.5 
## xmax       : 3.5 
## ymin       : 43.5 
## ymax       : 45.5 
## 
## $Count
## [1] 4
</code></pre>

<pre><code class="r">GetCamp_VarMatrix(&quot;MyCampaign.nc4&quot;, &#39;file&#39;)$Matrix
</code></pre>

<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]    1    6
## [2,]    5    6
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    6    2
## [2,]    3    3
## 
## , , 3
## 
##      [,1] [,2]
## [1,]    1    3
## [2,]    1    1
</code></pre>

<p>So in the above output, these values are indices that will be mapped to the list of categorical values in the long_name.</p>

<hr/>

<h3>Modify existing Campign files</h3>

<h4>Increase the number of  scenarios</h4>

<p>You can also increase the number of scenarios using the code below</p>

<pre><code class="r">#push the scenario dimension to how many we need
Add_Scenario(&quot;MyCampaign.nc4&quot;, 3)
</code></pre>

<h4>Copy values between scenarios</h4>

<p>if we decide to increase the number of scenarios, this means that the added new scenarios will not have any values, therefore we can use the below function to copy values from one scenario to others. Then we will be able to modify new copied values later on.</p>

<pre><code class="r">copy_scanarios(&quot;MyCampaign.nc4&quot;, varname=&#39;icrag&#39;, fromScenario=1, toScenarios=c(4:6))
</code></pre>

<h4>Remove a variable</h4>

<p>We can also remove a variable from our Campign nc file using the following function:</p>

<pre><code class="r">remove_var_campaign(&quot;MyCampaign.nc4&quot;, outfile=&quot;Campaign2.nc4&quot;, varnames=c(&#39;file&#39;))
</code></pre>

<h4>Edit values for a given variable</h4>

<p>If you&#39;re also interested to edit a specifc value in your campaign, you may use the following function:</p>

<pre><code class="r">Inspect_Camp(&quot;MyCampaign.nc4&quot;)
</code></pre>

<pre><code>## $Lat
## [1] 44 45
## 
## $Lon
## [1] -91 -92
## 
## $Scen
## [1] 1 2 3 4 5 6
## 
## $Variables
## [1] &quot;myvar&quot;    &quot;icrag&quot;    &quot;file&quot;     &quot;cultivar&quot;
## 
## $Extent
## class      : Extent 
## xmin       : 0.5 
## xmax       : 6.5 
## ymin       : 43.5 
## ymax       : 45.5 
## 
## $Count
## [1] 4
</code></pre>

<pre><code class="r">EditVar_Campaign(&quot;MyCampaign.nc4&quot;, &#39;icrag&#39;,
                 vals=list(lat=c(44),
                           lon=c(-91),
                           scenario=c(1),
                           Value=c(200)
                           )
                 )
</code></pre>

<p>To check if the edit worked :</p>

<pre><code class="r">GetCamp_VarMatrix(&quot;MyCampaign.nc4&quot;, &#39;icrag&#39;)$Matrix
</code></pre>

<pre><code>## , , 1
## 
##          [,1]     [,2]
## [1,] 2273.466 2240.229
## [2,] 2139.220  200.000
## 
## , , 2
## 
##          [,1]     [,2]
## [1,]    0.000 1760.544
## [2,] 1482.843 2419.936
## 
## , , 3
## 
##          [,1]     [,2]
## [1,] 1581.442 1812.443
## [2,] 2444.631 1579.626
## 
## , , 4
## 
##          [,1]      [,2]
## [1,] 2273.466 2240.2285
## [2,] 2139.220  241.0763
## 
## , , 5
## 
##          [,1]      [,2]
## [1,] 2273.466 2240.2285
## [2,] 2139.220  241.0763
## 
## , , 6
## 
##          [,1]      [,2]
## [1,] 2273.466 2240.2285
## [2,] 2139.220  241.0763
</code></pre>

<h4>Edit mapping variables</h4>

<p>You can also edit variables with <code>Mapping</code> property using the following function:</p>

<pre><code class="r">Edit_mapping_var (&quot;MyCampaign.nc4&quot;, &#39;file&#39; , &#39;long_name&#39;, &#39;met00000.met,met00001.met,met00001.met,met00001.met,met00001.met,met00001.met,met00001.met,met00001.met,met00001.met,met00001.met&#39;)
</code></pre>

<h4>Add Uncertainty</h4>

<p>Finally if we&#39;re planning to ensemblize a variable, we can create a variable first, then increase the number of scenarios and finally add uncertainty to the newly added scenarios. Adding the uncertainty could be done using the following function:</p>

<pre><code class="r">Add_Uncertainty_scenarios(&quot;MyCampaign.nc4&quot;, &quot;icrag&quot;, sd=5, scenario=1, toscenario=2:3)
</code></pre>

<p>This function takes the data in the <code>scenario</code> argument and uses that as a mean and generates new values given the <code>sd</code> arguments and applies to the other scenarios provided in <code>toscenario</code> argument. </p>

<hr/>

<h3>Creating a full pSIMS simulation</h3>

<p>This package relies on a series of pSIMS file templates for <code>params</code>, <code>campaign.json</code>, <code>campaign.nc</code>, <code>template.apsim</code> and in case user needs to use a cusotmized version of these files, they either need to be modified using the provided tools in this package or the path to those files need to be provided.</p>

<p><code>pSIMS_Site_Make</code> allows for modifying Param file and Campagin.json using two different methods:</p>

<p>1) User can edit these two files by providing a list of items that need to be changed in these files using <code>camp_list</code> and <code>param_list</code> argumnet like the example below for <code>camp_list</code>. In this example, user asks to change the planting depth to <code>35</code> and the rest of the variables will be set using the defult values. Defualt values can be seen and checked using <code>Read_Campaign_template()</code> and <code>Read_param_template()</code>. <code>Read_Campaign_template()</code> and <code>Read_param_template()</code> reads those templates as R lists and each element in the list can be accessed and modified using usual R commands.</p>

<p>2) The second approach start with reading the templates as it was mentioned before and user can directly change any of the values. Then the modified obj need to be passed to the <code>pSIMS_Site_Make</code> function using <code>Param_template_Obj</code> and <code>Campaign_json_Obj</code> arguments. Below we show an example of this method for <code>Param_template_Obj</code>.</p>

<p><code>pSIMS_Site_Make</code> uses the lat/lon provided as arguments and maps them to the pSIMS girdding system. Then using the information provided in the <code>Bash_control</code> argument, it creates a bash script for running pSIMS inside a singularity container. </p>

<p><code>Campaign_Path</code>: Allows for providing your own customized ncdf campagin file similar to what we created above.</p>

<p><code>APSIM_Template_Path</code> Allows for providing your custom APSIM template</p>

<p><code>Bash_control</code></p>

<pre><code class="r">tmp_param &lt;- Read_param_template()
tmp_param$model &lt;- &quot;apsim79&quot;



pSIMS_Site_Make(dirname = &quot;.&quot;,
                Project_name = &quot;Site123&quot;,
                Lat=40.04,
                Lon = -88.5,
                host=NULL,
                Param_template_Obj=tmp_param,
                camp_list=list(planting=list(depth=&quot;35&quot;)),
                Campaign_Path = &quot;MyCampaign.nc4&quot;,
                APSIM_Template_Path = NULL,
                Bash_control=list(pSIMS_Data_Path=&quot;/pysims/data&quot;, # No need to edit this
                                  pSIMS_server_Path=&quot;/projects/aces/hamzed/psims/Data&quot;,
                pSIMS_Sing_Image=&quot;/projects/aces/mkivi2/psims/Bash/apsim_psims_image/custom_psims_full.img&quot;)
                )
)
</code></pre>

<p>This function create a new directory in the <code>dirname</code> named <code>Project_name</code> with all the required files and it will be ready to be run either localy or to me moved to the campus cluster.</p>

<p><strong><em>Attention</em></strong> should be paid to the type of variables when we&#39;re editing editing param file and campaign.json. If you&#39;re planning to change for example <code>ref_year</code> in the  param file the following code would result writing back a string year (which will break pSIMS):</p>

<pre><code class="r">tmp_param &lt;- Read_param_template()
tmp_param$ref_year &lt;- 2018
</code></pre>

<p>The correct way of adding numerical integer values is like below:</p>

<pre><code class="r">tmp_param &lt;- Read_param_template()
tmp_param$ref_year &lt;- 2018L
</code></pre>

<h4>Moving pSIMS simulation between different servers:</h4>

<p>Create a ssh tunnel using the following command to transfer your files between your local machine and the campus cluster :</p>

<pre><code class="bash">ssh -n -N -f -o ControlMaster=yes -S ~/tunnel/tunnel  UIUC_NETID@cc-login.campuscluster.illinois.edu
</code></pre>

<p><code>~/tunnel/tunnel</code> is the path where the tunnel will be saved and will be used. The only difference between the <code>pSIMS_Site_Make</code> call above and below is the <code>host</code> argument which includes the name of the cluster, username, path to the tunnel (explained earlier) and the path to the simulation that will be created (this depends on the <code>dirname</code> and <code>Project_name</code> arguments) and finally where it needs to be transferred to. </p>

<p><strong><em>Attention</em></strong> should be paid to where the simulations are being moved to. If there is a ny directory with the same name, the conetent of that dir will be removed and replaced with newly created simulations.</p>

<pre><code class="r">host &lt;-
  list(name = &#39;cc-login.campuscluster.illinois.edu&#39;,
       user = &#39;hamzed&#39;,
       tunnel = &#39;~/tunnel/tunnel&#39;,
       from=&#39;/home/hamzed/pSIMS/Site123&#39;,
       to=&#39;/projects/aces/hamzed/psims/Data/&#39;)


pSIMS_Site_Make(dirname = &quot;.&quot;,
                Project_name = &quot;Site123&quot;,
                Lat=40.04,
                Lon = -88.5,
                Param_template_Obj=tmp_param,
                camp_list=list(planting=list(depth=&quot;35&quot;)),
                host=host,
                Bash_control=list(pSIMS_Data_Path=&quot;/pysims/data&quot;, # No need to edit this
                                  pSIMS_server_Path=&quot;/projects/aces/hamzed/psims/Data&quot;,
                pSIMS_Sing_Image=&quot;/projects/aces/mkivi2/psims/Bash/apsim_psims_image/custom_psims_full.img&quot;)
                )
</code></pre>

<p>After running your simulations you can also transfer back the results to your local machine using the following function:</p>

<pre><code class="r">remote.copy.from(host=host,
                 src=&#39;/projects/aces/hamzed/psims/Data/EF&#39;,
                 dst=file.path(getwd(),&quot;EF_results&quot;),
                 delete = TRUE)
</code></pre>

<p>where <code>src</code> is where the simulation is located on the campus cluster and <code>dst</code> is where you want to save the results. </p>

<p>A full end to end test of the <code>pSIMS_Site_Make</code> can be found in the <code>tests</code> directory inside the package</p>

</body>

</html>
